# 传统上，局域网使用广播技术，广域网使用交换技术，城域网使用以太网技术

# 中继器和桥接器是用于局域网的物理层和数据链路层的联网设备

# OSI七层层次：
	物理层(集线器通信，比特流)
	数据链路层(交换机，帧)
	网络层(路由器，数据报/分组)
	传输层(报文段/数据报)
	会话层
	表示层
	应用层
# OSI模型中3个主要概念：服务、接口、协议

# 计算机网络性能：
	1、速率：数据的传送速率
	2、带宽：bit/s，数据量/发送时延
	3、吞吐量
	4、时延：发送/传输时延(数据帧长度/发送速率)、传播时延(信道长度/传播速率)、处理时延、排队时延
	5、往返时间RTT，2倍的传送时延
	6、信道利用率 = 发送时延 / (传播时延 + 发送时延 + ...)



						物理层
# 主要功能：信号的编码和译码、比特的接收与传输
# 电路交换：这一路径在整个数据传输期间一直被独占，直到通信结束后才被释放
# 报文交换：无连接
# 分组交换

# 数据报服务：不同分组可走不同路径，按不同顺序到达目的结点
# 虚电路服务：建立一条逻辑上的虚电路

# 归零编码、非归零编码、反向非归零编码、曼彻斯特编码(包含同步信息)等：均是将数字数据编码为数字信号
# QAM是一种用模拟信号传输数字数据的编码方式
# 脉冲编码调制(PCM)：使用数字信号编码模拟数据

# 波特率：数值上，等于比特率/每符号所含的比特数的比值；逻辑上等，等于每秒可能发生的信号变化次数
# 比特率 = 波特率 * log2 n；一个码元含有的k个比特数，有2^k个有效离散值
# 奈奎斯特定理：理想低通信道下的极限数据传输速率 = 2W(带宽)log2 V(离散电平的数目)
# 香农定理：信道的极限数据传输速率 = Wlog2 (1+S/N)
# 差分曼彻斯特编码：若码元为1，则前半个码元的电平与上一码元的后半个码元的电平相同；若码元为0，则情形相反
# 曼彻斯特编码：前一个间隔为高电平而后一个间隔为低电平表示码元1，码元为0，情形相反；自含时钟编码的编码方式
# 物理层接口的特性
	1、机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置
	2、电气特性：指明在接口电缆的各条线上出现的电压的范围
	3、功能特性：指明某条线上出现的某一电平的电压表示何种意义
	4、过程/规程特性：指明对于不同功能的各种可能事件的出现顺序
# 中继器：放大数字信号，将衰减的信号整形再生；
# 放大器：放大模拟信号，将衰减的信号放大
# 集线器(hub)：多端口的中继器
# 转发器：放大信号
# 网桥：用来连接两个网段以扩展物理网络的覆盖范围
# 路由器：实现不同网络的互连
# 5-3-4规则：5个网段、4个中继器或集线器、3个网段为主机段




						数据链路层
# MAC子层主要功能：组帧和拆帧、比特差错检测、寻址、竞争处理
# LLC子层主要功能：建立和释放数据链路层的逻辑连接、提供与高层的接口、差错控制、给帧加序号
# 停止等待协议

# 连续ARQ，发送窗口大小 <= 窗口总数 - 1
	# 回退N帧协议(GBN)：
		1、发送窗口1 < WT <= 2^n - 1
		2、接收窗口为1
	
	# 选择重传ARQ协议
		1、WT = WR <= 2^(n-1)
		2、避免了GBN的冗余回退
# MAC：用来决定广播信道中信道分配的协议属于数据链路层的一个子层，称为介质访问控制(Medium Access Control，MAC)子层
	由12个16进制数表示，如：02-60-8c-e4-b1-21，高24位为厂商代码，低24位为厂商自行分配的网卡序列号
# MAC地址：全世界的每块网卡(网络适配器)在出厂时都有一个唯一的代码
# 介质访问控制：
	1、信道划分介质访问控制(频分FDM(传输模拟信号)、时分TDM(抗干扰、可以再生整形、传输数字信号)、波分WDM、码分CDM多路复用)
	2、随机访问介质访问控制(ALOHA、CSMA、CSMA/CD、CSMA/CA)
		普通ALOHA：不进行检测直接发送数据，超时重传；吞吐量较低
		时隙ALOHA：将各站在时间上同步，将时间划分为等长的时隙；每个时隙开始时才能发送一个帧；比普通吞吐量大一倍
		CSMA：多一个载波监听装置；
			1-坚持CSMA：不考虑延迟；信道忙，继续监听
			非坚持CSMA：信道忙，放弃监听；随机时间后，再继续监听
			p-坚持CSMA：信道忙，持续监听；信道空闲，以p概率发送数据，以1-p推迟到下一个时隙
		CSMA/CD：碰撞检测；先听后发，边听边发，冲突停发，随机重发
			1.1冲突窗口/碰撞窗口/争用期：以太网端到端往返时间2t
			1.2最短帧长：64B，64B后一定是正常帧，因为已经成功抢占了信道；如果发送的数据量小，则需要加入一个整数字节填充字段
			1.3截断二进制指数退避算法：确定基本退避时间，一般是2t；定义参数k，k={重传次数、10}；从{0,1,..,2^k-1}随机取出一个数r作为时间倍数
				重传次数达到16次仍失败，则表示网络拥挤，报错.
		CSMA/CA：适用于无线局域网，碰撞避免；使用确认重传方案；
		# 最短帧长 = 总线传播时延 * 数据传输速率 * 2
	3、轮询访问：令牌传递协议
# 使用802.1系列协议的局域网又称WiFi
# 局域网最小构件是基本服务集BSS，各站可以在BSS内通信，也可以与本BSS外部站通信，都必须通过本BSS的AP；
	安装AP时，必须为其分配一个不超过32字节的服务集标识符SSID和一个信道
# 扩展的BSS为ESS，通过Portal的设备为用户提供 到有线连接的以太网接入
# 局域网仅工作在OSI参考模型的物理层和数据链路层；而广域网工作在OSI参考模型的下三层
# 10BASE-2：10表示数据率Mb/s；BASE表示基带传输；2表示每段电缆的最长长度为200m；T表示双绞线；F表示光纤
# 以太网卡的同步机制是：曼彻斯特编码
# 高速以太网：
	1、100BASE-T以太网：既支持全双工，又支持半双工
	2、吉比特以太网：1Gb/s下支持两种双工模式
	3、10吉比特以太网：只使用光纤作为传输媒体，只工作在全双工方式
# 以太网中的通信方式：广播，包括发送方，也能接收到自己的信息
# 吉比特以太网的物理层有两个标准：IEEE 802.3z和IEEE 802.3ab，前者采用光纤通道，后者采用4对UTP5类线
# VLAN建立在交换技术基础上，以软件方式实现逻辑分组与管理
# 划分VALN的方式：基于端口、基于MAC地址、基于IP地址
# MAC协议提供的是：无连接的不可靠服务
# MAC的广播地址是fffffffff
# 802.11帧的地址字段最常用的两种情况：
	1、去往AP：0；来自AP：1；地址1：接收地址=目的地址；地址2：发送地址=AP地址；地址3：源地址
	2、去往AP：1；来自AP：0；地址1：接收地址=AP地址；地址2：发送地址=源地址；地址3：目的地址
# 广域网是因特网的核心部分，其任务是长距离运送主机所发送的数据，由交换机和链路组成
# 结点交换机(switch，多端口网桥，各端口速率不同、全双工)在单个网络中转发分组，而路由器在多个网络构成的互联网中转发
# 广域网 数据链路层协议：PPP(特殊字符填充法，支持不同的网络层协议)、HDLC(比特填充的特殊标记法)
# 广域网的通信方式：存储转发
# 网段：多个以太网通过网桥连接后，就成为一个覆盖范围更大的以太网，而原来的每个以太网就称为一个网段
# 过滤：决定一个帧是应该转发到某个端口还是应该将其丢弃，称为过滤
# 转发：决定一个帧应该被移动到哪个接口，称为转发
# 过滤和转发，均借助于交换表(自学习算法)完成
# 网络层可以隔离冲突域和广播域；数据链路层仅能隔离冲突域；物理层均不能隔离
# 交换机实现的虚拟局域网，可以隔离冲突域和广播域
# 自学习算法中，即使当前已经有不符合的端口在表中，广播时，仍然会往此处发送
# 交换机有直通交换和存储转发交换，直通交换只检查帧的目的地址，而存储转发则需要查找转发表
# 广域网由多个结点交换器组成；
	多个局域网和广域网通过路由器组成互联网；
	一个自治系统，有多个路由器；
	多个自治系统，组成网络


						网络层
# 网络层主要任务：转发和路由选择
# 流量控制：往往是指在发送端和接收端之间的点对点通信量的控制，抑制发送端发送数据的速率，以便使接收端来得及接收
# 拥塞控制：必须保证通信子网能够传送待传送的数据，是一个全局性问题，涉及网络中所有主机、路由器及其他因素
# 拥塞控制方法：开环控制、闭环控制
# 动态路由算法：
	1、距离-向量路由算法：所有结点参与路由选择信息交换，保证路由的有效性和一致性；定期将整个路由表传送给给所有与之直接
				相邻的结点；“好消息传得快，坏消息传得慢”
	2、链路状态路由算法：要求每个参与该算法的结点均具有完全的网络拓扑信息，向所有路由器发送自己相邻的所有路由信息
# 以太网帧的最大传送单元(MTU)为1500B
# IP地址(原来的)：网络号 + 主机号
# 用转发器或桥接器连接的若干LAN仍然是同一个网络(因为没有隔离冲突域)
# 网络地址转换NAT(网关使用此方法，NAT转换表)：可以使得整个专用网只需要一个全球IP地址就可以与因特网连通；将专用网络地址转换为公用地址
	1、节省了IP的消耗
	2、为了网络安全，划出了部分IP地址为私有IP地址；
		私有IP只用于LAN，不用于WAN连接；
		允许私有IP地址被LAN重复使用
	3、私有IP地址网段如下：
		A类：10.0.0.0 ~ 10.255.255.255
		B类：172.16.0.0 ~ 172.31.255.255
		C类：192.168.0.0 ~ 192.168.255.255
# IP地址(现在的，加了个子网)：网络号 + 子网号(从主机号借用若干比特作为子网号) + 主机号
# 使用子网掩码来表示对原网络中主机号的借位
# 默认子网掩码是仅包含网络号，可以动态更改其子网掩码位数(变长子网掩码)
# 无分类编址CIDR：网络前缀 + 主机号
	1、而网络前缀所占的比特数对应于网络号的部分，等效于子网掩码的1部分
	2、CIDR不使用子网，是指CIDR并没有在32位地址中指明若干位作为子网字段；但分配到一个CIDR地址块的组织，仍可以在本组织内根据
		需要划分出一些子网
	3、作用是：把小的网络汇聚成大的超网
# 路由聚合/超网：CIDR地址块表示的一系列地址
# 主机路由：a.b.c.d/32
# 默认路由：0.0.0.0/0
# 地址解析协议ARP：从IP到MAC的映射；每台主机均有ARP缓存，存放映射
# 动态主机配置协议DHCP(应用层)：给主机动态分配IP地址，基于UDP；C/S架构
# 网际控制报文协议ICMP(网络层)：提高IP数据报交付成功的机会，让主机或路由器报告差错和异常情况
# IP分组经过多次路由转发到达目标网络后，改为在目标LAN中通过数据链路层MAC地址以广播方式寻址；提高路由选择的效率
# 可分配IP指除去0.0.0.0和127.0.0.1的所有IP
# 默认网关：离当前主机最近的路由器的端口地址
# IP分片：
	1、原IP数据报：首部20B + 数据；将数据段分片，每片前均加上20B的首部
	2、数据的字节序号是从0开始的
# IP数据报首部格式：
	1、版本：IP协议版本：ipv4、ipv6， 占4位                                                              
	2、首部长度：单位为4B，占4位；通常是20B，没有其他可选项选择
	3、总长度：占16位；单位为字节B
	4、标识：占16位，是个计数器，每个数据报片都复制一次标识号
	5、标志：占3位；
		最低位为MF，1表示后面还有分片，0表示最后一个分片；
		中间一位是DF，1表示不允许分片，0表示允许分片
	6、片偏移：占13位，单位为8B
# IP规范规定，所有主机和网关至少能支持576B的分组长度，这个数据报中，512B存放数据，64B用作分组头
# 带有NAT功能的路由器，IP数据报的目的IP和源IP会进行内部IP与公网IP的转换
# IPv6提供Qos保障、首部长度固定，没有校验和字段
# 内部网关协议：BIP(udp)、OSPF(IP)
# 外部网关协议：BGP-4(tcp)
# 路由收敛：经过若干RIP广播后，所有路由器都最终知道了整个IP网络的路由表
# OSPF的五种分组类型：
	1、问候(hello)分组：用来发现和维持邻站的可达性
	2、数据库描述分组：向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息
	3、链路状态请求分组：向对方请求发送某些链路状态项目的详细信息
	4、链路状态更新分组：用洪泛法对全网更新链路状态
	5、链路状态确认分组：对链路更新分组的确认
# BGP-4种报文
	1、打开open报文：用来与相邻的另一个BGP发言人建立关系
	2、更新报文：用来发送某一路由的信息，以及列出要撤销的多条路由
	3、保活报文：用来确认打开报文并周期性地证实邻站关系
	4、通知报文：用来发送检测到地差错
# 域间路由的协议：BGP
# 距离不可达时，统一以16代表，17、18、19也写为16；同时此路由器丢弃该IP分组，并向目的主机报告目的不可达
# 组播：大部分的D类地址
	1、组播一定仅应用于udp
	2、主机使用一个称为IGMP(因特网组管理协议)的协议加入组播组
	3、组播时，主机仅发送一份数据，只有数据在传送路径出现分岔时才将分组复制后继续转发
	4、由于对组播数据报不产生ICMP差错报文，因此，若ping组播地址，将永远不会收到响应
	5、D类地址的后23位可用作组播地址，倒数第24位置为0后映射
# 移动IP：
	1、自己的手机看作一个移动站，移动站在本地网络内时，采用tcp或udp进行通信；
		而当移动站移动到其他局域网时，会先向当地外部代理注册IP，并将此IP发送给本地归属代理；
		当有外界发送IP数据报时，本地归属代理会先截获此IP数据报，然后与分配的IP建立起一个隧道，并将IP数据报封装后，发送
		给外部代理，外部代理解析此封装报为普通IP报，发送给移动站
	2、发送IP报时，通过外部代理直接发送
# 冲突域：指连接到同一物理介质上的所有结点的集合，这些结点之间存在介质争用的现象
# 广播域：指接收同样广播消息的结点的集合
# 路由器(路由选择、分组转发)：是一种具有多个输入输出端口的专用计算机，其任务是连接不同的网络(连接异构网络)并完成路由转发；在多个逻辑网络(即多个广播域)
	互连时必须使用路由器
# 路由交付：分为直接交付和间接交付；当发送站与目的站在同一网段内时，就使用直接交付
# ARP请求和DHCP请求过程类似，都是先广播请求，再接收分配




						传输层
# http使用tcp服务
# udp不支持分片
# udp首部8B，4个字段，每段2B
	1、源端口
	2、目的端口
	3、长度：指总长度
	4、校验和：可选字段，不选全置为0
	5、udp提供的校验，如果有误，直接丢弃，无法做到可靠传输(出错需要重传)
# 以太网数据帧的数据部分是IP数据报